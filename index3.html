<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Slides</title>
  <meta 
    name="description" 
    content="Доклад об авторизации">

  <link rel="preload" href="fonts/FiraCode-VariableFont_wght.ttf" as="font" type="font/ttf" crossorigin>
  <link rel="preload" href="fonts/Inter-VariableFont_slnt,wght.ttf" as="font" type="font/ttf" crossorigin>

  <link rel="preload" as="style" href="styles/reset.css">
  <link rel="preload" as="style" href="styles/fonts.css">
  <link rel="preload" as="style" href="styles/SlideController.css">
  <link rel="preload" as="style" href="styles/variables.css">
  <link rel="preload" as="style" href="styles/slide.css">
  <link rel="preload" as="style" href="styles/progress.css">
  <link rel="modulepreload" href="javascript/SlideController.mjs">
  <link rel="modulepreload" href="javascript/Keys.mjs">
  <link rel="modulepreload" href="javascript/Selectors.mjs">
  <link rel="stylesheet" href="styles/SlideController.css">
</head>
<body>
  <main>
    <ol class="slides">

      <li class="slide">
        <figure class="content centred sub-title sub-title-1">
          <div>
            <h2>Проблема</h2>
          </div>
          <figcaption class="caption"><span>Какую проблему мы решаем</span></figcaption>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred problems-list">
          <div>
            <h3>Почему нет?</h3>
            <ul>
              <li>Нет доверия</li>
              <li>Недостаточно информации</li>
              <li>Сложно</li>
            </ul>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred advice">
          <div>
            <h3>Доверие</h3>
            <p>Пользователь должен думать, что пользоваться вашим сервисом — безопасно</p>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content split">
          <div class="half vh screenshot screenshot--report"></div>
          <div class="half vh centred screenshot">
            <img src="images/lastpass.svg" alt="LastPass">
          </div>
        </figure>  
      </li>

      <li class="slide">
        <figure class="content centred advice">
          <div>
            <h3>Доверие</h3>
            <p>Покажите рейтинги и ревью, убедитесь, что вы активны и доступны в используемых медиа-каналах, добавьте микроразметку</p>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--rating"></figure>
      </li>

      <li class="slide">
        <figure class="content centred advice">
          <div>
            <h3>Прозрачность</h3>
            <p>Расскажите зачем вам нужна та или иная информация и как она будет использоваться. А также — как не будет.</p>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--transparency"></figure>
      </li>

      <li class="slide">
        <figure class="content centred advice">
          <div>
            <h3>Простота</h3>
            <p>Не запрашивайте данные до момента, когда они понадобятся</p>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred sub-title sub-title-2">
          <div>
            <h2>HTML</h2>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred sub-title sub-title-3">
          <div>
            <h2>Формы</h2>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred problems-list">
          <div>
            <h3>Какие формы?</h3>
            <ul>
              <li>Регистрация</li>
              <li>Логин</li>
              <li>Восстановление пароля</li>
            </ul>
          </div>
        </figure>
      </li>


      <li class="slide">
        <figure class="content illustration illustration--robot">
          <h2 class="cloud"><b>Семантика! <br> БИП!</b></h2>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
            <pre data-code="36"><code class="language-html">&lt;form method=&quot;post&quot; action=&quot;&#x2F;sign-up&#x2F;&quot;&gt;
  &lt;fieldset&gt;
    &lt;legend&gt;Регистрация&lt;&#x2F;legend&gt;
    &lt;!-- Поля ввода --&gt;
  &lt;&#x2F;fieldset&gt;
  &lt;button type=&quot;submit&quot;&gt;
    Зарегистрироваться
  &lt;&#x2F;button&gt;
&lt;&#x2F;form&gt;</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
            <pre data-code="36"><code class="language-html">&lt;label&gt;
  Email
  &lt;small&gt;Мы не будем спамить&lt;&#x2F;small&gt;
  &lt;input 
    value=&quot;&quot;
    name=&quot;email&quot;
    type=&quot;email&quot; 
    placeholder=&quot;email@gmail.com&quot;&gt;
&lt;&#x2F;label&gt;</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred sub-title sub-title-4">
          <div>
            <h2>Атрибуты</h2>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
            <pre data-code="67"><code class="language-html">autocorrect="off"
spellcheck="false"
autocapitalize="none"</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred problems-list">
          <div>
            <h3>Какие ещё атрибуты будут нам полезны?</h3>
            <ul>
              <li>inputmode</li>
              <li>autocomplete</li>
            </ul>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred problems-list">
          <div>
            <h3>inputmode</h3>
            <div class="split">
              <ul class="half">
                <li>none</li>
                <li>text</li>
                <li>tel</li>
                <li>url</li>
              </ul>
              <ul class="half">
                <li>email</li>
                <li>numeric</li>
                <li>decimal</li>
                <li>search</li>
              </ul>
            </div>
          </div>
        </figure>
      </li>


      <li class="slide">
        <figure class="content centred problems-list">
          <div>
            <h3>autocomplete</h3>
            <ul>
              <li>username</li>
              <li>new-password</li>
              <li>current-password</li>
              <li>one-time-code</li>
              <li>…</li>
            </ul>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
            <pre data-code="67"><code class="language-html">inputmode=&quot;email&quot;
autocomplete=&quot;email&quot;</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content split">
          <div class="third vh screenshot screenshot--email"></div>
          <div class="third vh screenshot screenshot--email-android"></div>
          <div class="third vh screenshot screenshot--email-android-2"></div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--email-desktop"></figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
            <pre data-code="50"><code class="language-bash">autocomplete=&quot;new-password&quot;</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content split steps">
          <div class="third screenshot screenshot--new-password-1"></div>
          <div class="third screenshot screenshot--new-password-2"></div>
          <div class="third screenshot screenshot--new-password-save"></div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content split steps">
          <div class="third screenshot screenshot--new-password-android-1"></div>
          <div class="third screenshot screenshot--new-password-android-2"></div>
          <div class="third screenshot screenshot--new-password-android-save"></div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--new-password-desktop"></figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
            <pre data-code="42"><code class="language-html">autocomplete=&quot;current-password&quot;</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content split steps">
          <div class="screenshot screenshot--current-password third vh "></div>
          <div class="screenshot screenshot--current-password-android-1 third vh "></div>
          <div class="screenshot screenshot--current-password-android-2 third vh "></div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--current-password-desktop"></figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
            <pre data-code="48"><code class="language-html">inputmode=&quot;numeric&quot;
autocomplete=&quot;one-time-code&quot;</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
            <pre data-code="64"><code class="language-js">
`${code} is your 
  authentication code.
  @${domain} #${code}`
            </code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content split steps">
          <div class="quarter vh screenshot screenshot--sms-1"></div>
          <div class="quarter vh screenshot screenshot--sms-2"></div>
          <div class="quarter vh screenshot screenshot--sms-3"></div>
          <div class="quarter vh screenshot screenshot--sms-4"></div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--sms-input"></figure>
      </li>

      <li class="slide">
        <figure class="content split steps">
          <div class="screenshot screenshot--settings-1 third vh "></div>
          <div class="screenshot screenshot--settings-2 third vh "></div>
          <div class="screenshot screenshot--settings-3 third vh "></div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--desktop-sms-input"></figure>
      </li>

      <li class="slide">
        <figure class="content centred problems-list">
          <div>
            <h3>iOS ищет слова в близости к цифрам</h3>
            <ol>
              <li>code</li>
              <li>passcode</li>
            </ol>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred problems-list">
          <div>
            <h3>Chrome на Android не поддерживает декларативный подход к автозаполнению OTP</h3>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred sub-title sub-title-3">
          <div>
            <h2>Title long enough for more then one line</h2>
          </div>
          <figcaption class="caption"><span>Это просто произвольный текст, который должен помочь докладчику</span>
          </figcaption>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred spec split">
          <div class="half">
            <h2 class="sms-title">Origin-bound one-time codes delivered via SMS</h2>
          </div>
          <div class="half">
            <img class="book-qrcode" src="images/sms.svg" alt="QR-Code со ссылкой на страницу спецификации Origin-bound one-time codes delivered via SMS">
            <a aria-label="Прочесть про формат SMS, который нужно использовать, что бы сработало автозаполнение" target="_blank" data-click href="https://wicg.github.io/sms-one-time-codes/">Прочесть про формат SMS, нужный для автозаполнения</a>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred spec split">
          <div class="half">
            <h2 class="sms-title">Automatic Strong Passwords and Security Code AutoFill</h2>
          </div>
          <div class="half">
            <img class="book-qrcode" src="images/wwdc2018.svg" alt="QR-Code со ссылкой на страницу с видео">
          <a aria-label="Посмотреть презентацию Apple WWDC 2018, касающуюся новых возможностей iOS 12" target="_blank" data-click href="https://developer.apple.com/videos/play/wwdc2018/204/">Посмотреть презентацию Apple WWDC 2018, касающуюся новых возможностей iOS 12</a>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred spec split">
          <div class="half">
            <h2>HTML Living Standard</h2>
          </div>
          <div class="half">
            <img class="book-qrcode" src="images/autofill.svg" alt="QR-Code со ссылкой на страницу, где можно купить книгу Form Design Patterns">
            <a aria-label="Открыть раздел автозаполнения спецификации HTML" target="_blank" data-click href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#autofill">Прочесть про автозаполнение</a>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred spec split">
          <img class="half book-illustration" src="images/book-design-patterns.png" alt="Книга Form Design Patterns">
          <div class="half">
            <img class="book-qrcode" src="images/book-design-patterns.svg" alt="QR-Code со ссылкой на страницу, где можно купить книгу Form Design Patterns">
            <a aria-label="Купить книгу Form Design Patterns" target="_blank" data-click href="https://www.smashingmagazine.com/printed-books/form-design-patterns/">Купить книгу</a>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred sub-title sub-title-5">
          <div>
            <h2>Источник данных</h2>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content illustration illustration--robot-2">
          <h2 class="cloud"><b>Твои пароли<br> зохвачены! БИП!</b></h2>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--save-password"></figure>
      </li>

      <li class="slide">
        <figure class="content illustration illustration--scream">
          <h2 class="cloud"><b>Зада-а-a-a-ай na-a-a-a-ame!</b><span></span></h2>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
            <pre data-code="48"><code class="language-html">&lt;StyledInput
  ref={emailInputRef}
  type=&quot;email&quot;
  onChange={setEmail}
  value={email}
  autoComplete=&quot;email&quot;
  &#x2F;&gt;</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot  screenshot--nonames"></figure>
      </li>

      <li class="slide">
        <figure class="content centred problems-list ">
          <div>
            <h3>Chrome и Firefox</h3>
            <ol>
              <li>username</li>
              <li>поле перед паролем</li>
            </ol>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred problems-list ">
          <div>
            <h3>Safari</h3>
            <ol>
              <li>username</li>
              <li>email</li>
              <li>поле перед паролем</li>
            </ol>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
            <pre data-code="48"><code class="language-html">autocomplete=&quot;username email&quot;</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--autofill"></figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--add-list"></figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--add"></figure>
      </li>

      <li class="slide">
        <figure class="content split steps">
          <div class="screenshot screenshot--password-1 third vh "></div>
          <div class="screenshot screenshot--password-2 third vh "></div>
          <div class="screenshot screenshot--password-3 third vh "></div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--can-change-password"></figure>
      </li>

      <li class="slide">
        <figure class="content centred sub-title sub-title-6">
          <div>
            <h2>Восстановление пароля</h2>
          </div>
        </figure>
      </li>


      <li class="slide">
        <figure class="content centred no-padding">
            <pre data-code="42"><code class="language-js">server.use(
"/.well-known/change-password", 
(req, res) => {
  res.redirect("/reset-password");
});</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
            <pre data-code="36"><code class="language-nginx">
server {
  rewrite 
    ^/.well-known/change-password$ 
    http://domain.com/reset-password
    redirect;
}
              </code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred problems-list ">
          <div>
            <h3>Ожидаемые ответы</h3>
            <ul>
              <li>302 Found</li>
              <li>303 See Other</li>
              <li>307 Temporary Redirect</li>
            </ul>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--restore"></figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
          <pre data-code="42"><code class="language-js">server.use(`
  /.well-known/resource-that-
  should-not-exist-whose-status-
  code-should-not-be-200`,
  (req, res) => {
    res.status(404).end();
  });</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred problems-list ">
          <div>
            <h3>Ожидаемый ответ</h3>
            <ul>
              <li>404 Not Found</li>
            </ul>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred spec split">
          <div class="half">
            <h2 class="password-title">A Well-Known URL for Changing Passwords</h2>
          </div>
          <div class="half">
            <img class="book-qrcode" src="images/change-password.svg" alt="QR-Code со ссылкой на спецификацию A Well-Known URL for Changing Passwords">
            <a aria-label="Открыть спецификацию смены паролей с помощью браузера" target="_blank" data-click href="https://w3c.github.io/webappsec-change-password-url/">Прочесть про URL для смены паролей с помощью браузера</a>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred sub-title sub-title-7">
          <div>
            <h2>JavaScript</h2>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred sub-title sub-title-0">
          <div>
            <h2>Credential Management</h2>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
          <pre data-code="64"><code class="language-js">navigator.credentials</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
          <pre data-code="42"><code class="language-js">.create(CredentialCreationOptions)
.store(Credential)
.get(CredentialRequestOptions)
.preventSilentAccess()</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred problems-list ">
          <div>
            <h3>Типы Credential: </h3>
            <ul>
              <li>PasswordCredential</li>
              <li>FederatedCredential</li>
              <li>OTPCredential&nbsp;(WebOTP)</li>
              <li>PublicKeyCredential&nbsp;(WebAuthn)</li>
            </ul>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred advice problems-list">
          <div>
            <h3>PasswordCredential</h3>
            <p>Регистрация с помощью логина и пароля.</p>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred advice problems-list">
          <div>
            <h3>CredentialData: </h3>
            <ol>
              <li>id</li>
            </ol>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred problems-list">
          <div>
            <h3>PasswordCredential: </h3>
            <ol>
              <li>name</li>
              <li>iconURL</li>
              <li>password</li>
              <li>type: "password"</li>
            </ol>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--registration-1"></figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
          <pre data-code="32" data-line="5-9"><code class="language-js">const signUpHandler = async (event) => { 
  // Registration
  const form = event.currentTarget;
  if (window?.PasswordCredential) {
    const credential = await navigator.
      credentials.create({
        password: form
      });
    navigator.credentials.store(credential);
  }
}</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
          <pre data-code="26" data-line="5-6"><code class="language-js">const signUpHandler = (event) => { 
  // Registration
  const form = event.currentTarget;
  if (window?.PasswordCredential) {
    const credential = new PasswordCredential(form);
    navigator.credentials.store(credential);
  }
}</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--registration-2"></figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--registration-3"></figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
          <pre data-code="36"><code class="language-js">function signUpHandler (event) { 
  // Registration
  const form = event.currentTarget;
  const data = new FormData(form);

  if (window?.PasswordCredential) {
    // …
  }
}</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
          <pre data-code="36"><code class="language-js">const credential = 
  new PasswordCredential({
    id: data.get('email'),
    name: data.get('firstName'),
    password: data.get('password'),
    iconURL: data.get('avatar'),
  });
navigator.credentials.store(credential);</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content split gap nowrap">
          <div class="half vh screenshot screenshot--registration-4"></div>
          <div class="half vh screenshot screenshot--registration-5"></div>
        </figure>  
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
          <pre data-code="48"><code class="language-js">navigator.credentials.get()</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred problems-list">
          <div>
            <h3>CredentialRequestOptions: </h3>
            <ol>
              <li>mediation 
                <ul>
                  <li>silent</li>
                  <li>optional</li>
                  <li>required</li>
                </ul>
              </li>
              <li>signal</li>
            </ol>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred problems-list">
          <div>
            <h3>PasswordCredential: </h3>
            <ol>
              <li>password: true  </li>
            </ol>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
          <pre data-code="32"><code class="language-js">(async () => {
  if (window?.PasswordCredential) {
    const credential = 
      await navigator.credentials.get({
        password: true,
        mediation: 'silent',
      });
    if (credential === null) return;
    // Authentication
    // Error handling
}})();</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred problems-list">
          <div>
            <h3>PasswordCredentialData: </h3>
            <ol>
              <li>id</li>
              <li>name</li>
              <li>iconURL</li>
              <li>password</li>
              <li>type: "password"</li>
            </ol>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--signedin"></figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
          <pre data-code="32" data-line="5"><code class="language-js">if (window?.PasswordCredential) {
  const credential = 
    await navigator.credentials.get({
      password: true,
      mediation: 'optional',
    });
  if (credential === null) return;
  // Authentication
  // Error handling
}</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--signedin-selector-1"></figure>
      </li>


      <li class="slide">
        <figure class="content centred screenshot screenshot--signedin-selector-2"></figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
          <pre data-code="42"><code class="language-js">if (navigator?.credentials
    .preventSilentAccess) {
  await navigator?.credentials
    .preventSilentAccess(id);
}</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content split steps">
          <div class="half vh screenshot screenshot--signedin-selector-2"></div>
          <div class="half vh screenshot screenshot--signedin-cross"></div>
        </figure>  
      </li>

      <li class="slide">
        <figure class="content centred problems-list">
          <div>
            <h3>FederatedCredentialData:</h3>
            <div class="split">
              <ul class="third">
                <li>id</li>
                <li>name</li>
                <li>iconURL</li>
              </ul>
              <ul class="two-thirds">
                <li>provider</li>
                <li>protocol</li>
                <li>type: "federated"</li>
              </ul>
            </div>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--credentials-support-1"></figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--credentials-support-2"></figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--no"></figure>
      </li>

      <li class="slide">
        <figure class="content centred spec split">
          <div class="half">
            <h2 class="password-title">The Credential Management API (Web Fundamentals)</h2>
          </div>
          <div class="half">
            <img class="book-qrcode" src="images/web-fun-credential.svg" alt="QR-Code with link to an Web Fundamentals article about Credential Management API usage">
            <a aria-label="Open an aricle about Credential Management" target="_blank" data-click href="https://developers.google.com/web/fundamentals/security/credential-management">Read how to use Credential Management in practice</a>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred spec split">
          <div class="half">
            <h2 class="password-title">Credential Management</h2>
          </div>
          <div class="half">
            <img class="book-qrcode" src="images/credentials.svg" alt="QR-Code со ссылкой на спецификацию Credential Management">
            <a aria-label="Open Credential Management specification" target="_blank" data-click href="https://w3c.github.io/webappsec-credential-management/">Read Credential Management specification</a>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred sub-title sub-title-1">
          <div>
            <h2>Web&nbsp;OTP&nbsp;API</h2>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred problems-list">
          <div>
            <h3>OTPCredential</h3>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
          <pre data-code="42"><code class="language-js">if ('OTPCredential' in window) {
  const { code, type } = await 
    navigator.credentials.get({
      otp: { transport:['sms'] }
    });

  if (!code) return;
  // Authentication
}</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content split">
          <div class="half vh screenshot screenshot--emulator-send"></div>
          <div class="half vh screenshot screenshot--emulator-recieve"></div>
        </figure>  
      </li>

      <li class="slide">
        <figure class="content centred problems-list">
          <div>
            <h3>Requirements for SMS in Chrome for Android: </h3>
            <ol>
              <li>The message must contain 4-10 alphanumeric characters, at least 1 of which is a number</li>
            </ol>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred problems-list">
          <div>
            <h3>Requirements for SMS in Chrome for Android: </h3>
            <ol start="2">
              <li>You must send a message from a number that does not belong to the user's contacts.</li>
            </ol>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred spec split">
          <div class="half">
            <h2 class="password-title">Verify phone numbers on the web with the Web OTP API (Web Fundamentals)</h2>
          </div>
          <div class="half">
            <img class="book-qrcode" src="images/webotp.svg" alt="QR-Code with link to an article on Web Fundamentals about SMS OTP autocomplete under Chrome for Android with Web OTP API">
            <a aria-label="Read about about SMS OTP autocomplete under Chrome for Android with Web OTP API" target="_blank" data-click href="https://web.dev/web-otp/">Read about SMS OTP autocomplete under Chrome for Android with Web OTP API</a>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred spec split">
          <div class="half">
            <h2 class="sms-title">Origin-bound one-time codes delivered via SMS</h2>
          </div>
          <div class="half">
            <img class="book-qrcode" src="images/sms.svg" alt="QR-Code with link to a specification on Origin-bound one-time codes delivered via SMS">
            <a aria-label="Read about sms format in the origin-bound one-time codes delivered via SMS specification" target="_blank" data-click href="https://wicg.github.io/sms-one-time-codes/">Read about sms format in the origin-bound one-time codes delivered via SMS specification</a>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred spec split">
          <div class="half">
            <h2>Web OTP API</h2>
          </div>
          <div class="half">
            <img class="book-qrcode" src="images/otp-api.svg" alt="QR-Code with link to Web OTP API specification">
            <a aria-label="Read Web OTP API specification, which we must use to aquire SMS from script" target="_blank" data-click href="https://wicg.github.io/web-otp/">Read how with Web OTP API, we can aquire SMS from script</a>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred sub-title sub-title-3">
          <div>
            <h2>isLoggedIn Web API</h2>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
          <pre data-code="64"><code class="language-js">navigator.setLoggedIn
navigator.setLoggedOut
navigator.isLoggedIn</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--stub"></figure>
      </li>

      <li class="slide">
        <figure class="content centred spec split">
          <div class="half">
            <h2 class="password-title">isLoggedIn<br>Web API</h2>
          </div>
          <div class="half">
            <img class="book-qrcode" src="images/isloggedin.svg" alt="QR-Code with link to isLoggedIn Web API specification">
            <a aria-label="Read isLoggedIn Web API specification" target="_blank" data-click href="https://github.com/privacycg/is-logged-in">Read how to notify browser that user is authenticated</a>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred sub-title sub-title-5">
          <div>
            <h2>WebAuthn</h2>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred problems-list">
          <div>
            <h3>PublicKeyCredential</h3>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred problems-list">
          <div>
            <h3>Cross-platform</h3>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred illustration illustration--key"></figure>
      </li>

      <li class="slide">
        <figure class="content centred illustration illustration--phones"></figure>
      </li>

      <li class="slide">
        <figure class="content centred problems-list">
          <div>
            <h3>Platform</h3>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred illustration illustration--plaform"></figure>
      </li>

      <li class="slide">
        <figure class="content centred illustration illustration--macbook-touch-id"></figure>
      </li>

      <li class="slide">
        <figure class="content centred illustration illustration--plaform-android"></figure>
      </li>

      <li class="slide">
        <figure class="content centred illustration illustration--plaform-windows"></figure>
      </li>

      <li class="slide">
        <figure class="content centred problems-list problems-list--small">
          <div>
            <h3>Platform keys:</h3>
            <ol>
              <li>User register</li>
              <li>We ask the user permission to use the platform key</li>
              <li>If the user gives permission, we register the key and store id in the browser</li>
              <li>Use this key on authentication attempt</li>
            </ol>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred problems-list problems-list--small">
          <div>
            <h3>Cross-platform keys:</h3>
            <ol>
              <li>User register</li>
              <li>Allow him to add a key in his profile and store id on the server</li>
              <li>When the user tries to authenticate, he enters the login and server return list of corresponding keys</li>
              <li>If we can find the key, then instead of using a password or along with it user use key and PIN</li>
            </ol>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred problems-list">
          <div>
            <h3>Key registration:</h3>
            <ol>
              <li>Request from server challenge, platform data and user information</li>
              <li>Pass them to the key and getting PublicKeyCredential</li>
            </ol>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred problems-list">
          <div>
            <h3>Key registration:</h3>
            <ol start="2">
              <li>Send PublicKeyCredential to the server for validation and storage</li>
              <li>Receiving Сredential Id, which we should store on the client</li>
            </ol>
          </div>
        </figure>
      </li>


      <li class="slide">
        <figure class="content centred no-padding">
          <pre data-code="38"><code class="language-js">if ('PublicKeyCredential' in window) {
  /* … */ 
}</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
          <pre data-code="28"><code class="language-js">const hasPlatformAuthenticator 
  = await PublicKeyCredential
  ?.isUserVerifyingPlatformAuthenticatorAvailable();</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
          <pre data-code="51"><code class="language-js">PublicKeyCredential
   .is
    User
    Verifying
    Platform
    Authenticator
    Available();</code></pre>
            <figcaption class="caption"><span>It's better then lord of morning star Tlahuizcalpantecuhtli</span></figcaption>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
          <pre data-code="28"><code class="language-js">const data = new FormData(form);
const response = await fetch(
  '/challenge/register', 
  {
    method: 'POST',
    body: JSON.stringify({
      name: data.get('name'),
      email: data.get('email'),
      'new-password': data.get('new-password'),
    }),
  });

const options = await response.json();</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
          <pre data-code="64"><code class="language-bash">npm i -S fido2-library</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding server">
          <pre data-code="34"><code class="language-js">const { Fido2Lib } 
  = require("fido2-library");

const f2l = new Fido2Lib({
  rpId: HOST,
  attestation: "none",
  authenticatorAttachment: "platform",
  authenticatorUserVerification: 
    "discouraged",
});</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding server">
          <pre data-code="34"><code class="language-js">fastify.post('/challenge/register/',
  async (request, reply) => {
    const { 
      email, 
      name 
    } = JSON.parse(request.body);
    // User registration
    // …
});</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding server">
          <pre data-code="41"><code class="language-js">const options 
  = await f2l.attestationOptions();</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred split maxvh">
          <pre class="half vh"><code data-code="21">
{
  🔴 rp: {
    🔴 name 
    🟢 id // origin
    🟢 icon
  },
  🔴 user: {
    🔴 id,❗️
    🔴 displayName,
    🔴 name,
    🟢 icon,
  },
  🔴 challenge,❗
  🔴 pubKeyCredParams,
</code></pre><pre class="half vh"><code data-code="21">

  🟢 timeout,
  🟢 excludeCredentials,
  🟢 authenticatorSelection: {
    authenticatorAttachment: [
      "platform",
      "cross-platform"
    ],
    requireResidentKey,
    userVerification: [
      "required",
      "preferred",
      "discouraged"
    ]
  },
  🟢 attestation,
  🟢 extensions,
}</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding server">
          <pre data-code="22"><code class="language-js">{
  rp: { 
    name: 'Anonymous Service', 
    id: 'nice-cheetah-30.loca.lt' },
  user: {
    id: [ArrayBuffer],
    name: 'thesilentimp@gmail.com',
    displayName: 'Anton Nemtsev' },
  challenge: [ArrayBuffer],
  pubKeyCredParams: [
    { type: 'public-key', alg: -7 },
    { type: 'public-key', alg: -257 }
  ],
  timeout: 60000,
  attestation: 'none',
  authenticatorSelection: { 
    userVerification: 'discouraged' }}</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred">
          <pre data-code="42"><code class="language-js">const toBuffer = (base64) => {
  const ASCIIString = atob(base64);
        
  return Uint8Array.from(
    ASCIIString, 
    c => c.charCodeAt(0)
  ).buffer;
}</code></pre></figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
          <pre data-code="41"><code class="language-js">const toBase64 = (buffer) => {
  const binaryString = 
    String.fromCharCode.apply(
      null, 
      new Uint8Array(buffer));

  return btoa(binaryString);
}</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding server">
          <pre data-code="48"><code class="language-js">const challengeString = 
  toBuffer(options.challenge);

request.session.set(
  'challenge', 
  challengeString);</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding server">
          <pre data-code="42"><code class="language-js">options.challenge = 
  challengeString;

options.user = {
  id: nanoid(), // Id Hash from db
  name: email,
  displayName: name,
};</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding server">
          <pre data-code="52"><code class="language-js">reply
  .type('application/json')
  .code(200)
  .send(options);</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding client">
          <pre data-code="36"><code class="language-js">options.user.id = 
  toBuffer(options.user.id);

options.challenge = 
  toBuffer(options.challenge);

const credential = 
  await navigator.credentials.create({
    publicKey: options
  });</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--ff-key"></figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--chrome-key"></figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--chrome-key-list-1"></figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--chrome-key-flag"></figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--chrome-key-list-2"></figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--chrome-key-list-3"></figure>
      </li>

      <li class="slide">
        <figure class="content centred screenshot screenshot--cable"></figure>
      </li>

      <li class="slide">
        <figure class="content split">
          <div class="half vh screenshot screenshot--safari-face-id-1"></div>
          <div class="half vh screenshot screenshot--safari-face-id-2"></div>
        </figure>  
      </li>

      <li class="slide">
        <figure class="content split">
          <div class="third vh screenshot screenshot--safari-key-1"></div>
          <div class="third vh screenshot screenshot--safari-key-2"></div>
          <div class="third vh screenshot screenshot--safari-key-3"></div>
        </figure>  
      </li>

      <li class="slide">
        <figure class="content split">
          <div class="third vh screenshot screenshot--android-key-1"></div>
          <div class="third vh screenshot screenshot--android-key-2"></div>
          <div class="third vh screenshot screenshot--android-key-3"></div>
        </figure>  
      </li>

      <li class="slide">
        <figure class="content centred no-padding">
          <pre data-code="36"><code class="language-js">{
  id: "nZOlyXf57erlQbudIIuOrQEdRUs",
  rawId: [ArrayBuffer],
  response: {
    attestationObject: [ArrayBuffer],
    clientDataJSON: [ArrayBuffer],
  },
  type: "public-key",
}</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding client">
          <pre data-code="36"><code class="language-js">const {
  id,
  type,
  response: {
    clientDataJSON: clientDataBuffer,
    attestationObject: attestationBuffer,
}} = credential;</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding client">
          <pre data-code="48"><code class="language-js">const clientDataJSON = 
  toBase64(clientDataBuffer);

const attestationObject = 
  toBase64(attestationBuffer);</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding client">
          <pre data-code="48"><code class="language-js">const attestation = {
  id,
  type,
  response: {
    clientDataJSON,
    attestationObject,
  },
};</code></pre>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred no-padding client">
          <pre data-code="48"><code class="language-js">const body = 
  JSON.stringify(attestation);

const response =
  await fetch(`/register`, {
    method: "POST",
    body });</code></pre>
        </figure>
      </li>


<!--       
      <li class="slide">
        <figure class="content centred no-padding">
            <pre data-line="6" data-code="30"><code class="language-js">const { Fido2Lib } = require("fido2-library");
const f2l = new Fido2Lib({
  rpId: HOST,
  attestation: "none",
  authenticatorAttachment: "platform",
  authenticatorUserVerification: 
    "discouraged",
});</code></pre>
        </figure>
      </li>
      <li class="slide">
        <figure class="content centred screenshot screenshot--ff-key"></figure>
      </li>
      <li class="slide">
        <figure class="content illustration illustration--key"></figure>
      </li>
      <li class="slide">
        <figure class="content split">
          <div class="half vh screenshot screenshot--safari-face-id-1"></div>
          <div class="half vh screenshot screenshot--safari-face-id-2"></div>
        </figure>  
      </li>

      <li class="slide">
        <figure class="content split">
          <div class="third vh screenshot screenshot--safari-key-1"></div>
          <div class="third vh screenshot screenshot--safari-key-2"></div>
          <div class="third vh screenshot screenshot--safari-key-3"></div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred problems-list problems-list--small">
          <div>
            <h3>Логин с помощью ключа: </h3>
            <ol>
              <li>Проверяем есть ли у нас Сredential Id</li>
              <li>Запрашиваем у сервера вызов (challenge) и данные о платформе</li>
            </ol>
          </div>
        </figure>
      </li>

      <li class="slide">
        <figure class="content centred spec split">
          <div class="half">
            <h2>Web OTP API</h2>
          </div>
          <div class="half">
            <img class="book-qrcode" src="images/otp-api.svg" alt="QR-Code со ссылкой на страницу спецификации Web OTP API">
            <a aria-label="Прочесть про Web OTP API, который нужно использовать для получения кода SMS из скрипта" target="_blank" data-click href="https://wicg.github.io/web-otp/">Прочесть как получить SMS из скрипта</a>
          </div>
        </figure>
      </li> -->

    </ol>
  </main>
  <progress id="progress"></progress>

  <meter id="timer"></meter>

  <form class="slide-selector">
    <input 
      aria-label="Page number" 
      autocomplete="off" 
      maxlength="3" 
      size="3" 
      pattern="[0-9]{1,3}" 
      placeholder="1" 
      type="number" 
      inputmode="numeric" 
      name="page">
  </form>

  <form class="timer-controller">
    <input 
      aria-label="Munutes" 
      autocomplete="off" 
      maxlength="3" 
      size="3" 
      pattern="[0-9]{1,3}" 
      placeholder="30"
      type="number" 
      inputmode="numeric" 
      name="minutes">
  </form>

  <!-- <form class="timer-controller">
    <fieldset>
      <label>
        Start at: 
        <input autocomplete="off" placeholder="12:30" type="time" name="start" step="300">
      </label>
      <label>
        Duration is: 
        <input aria-label="Duration is" size="2" autocomplete="off" placeholder="30" type="number" inputmode="numeric" name="duration">
        minutes
      </label>
    </fieldset>
  </form> -->

  <script type="module" src="javascript/SlideController.mjs"></script>
  <script src="javascript/prism.js"></script>
</body>
</html>